\usepackage{scrtime} % for \thistime (this package MUST be listed first!)
\usepackage[margin=1in]{geometry}
\usepackage[usenames,dvipsnames]{xcolor}
\definecolor{aqua}{RGB}{0, 128, 225}
\usepackage[colorlinks=true,citecolor=aqua,linkcolor=aqua,urlcolor=aqua,hypertexnames=false]{hyperref}
\usepackage{xspace}
\usepackage{tikz}
\usepackage{placeins} % \FloatBarrier
\usepackage{amsmath,amssymb} % \text, \cases
\usepackage{makecell, multirow}
\usepackage{enumerate} % fancier enumeration (e.g., a,b,c, ...)
\usepackage{ragged2e} % \RaggedRight
\usepackage{grffile} % \RaggedRight

%% cleveref package for convenient hyperrefercing/citing:
\usepackage[nameinlink,capitalize]{cleveref}
\crefname{equation}{Equation}{Equations}
\Crefname{equation}{Equation}{Equations}
\crefname{figure}{Figure}{Figures}
\Crefname{figure}{Figure}{Figures}
\crefname{section}{\S}{\SS}
\Crefname{section}{\S}{\SS}

%% line numbers
\usepackage{lineno}\renewcommand\thelinenumber{\color{gray}\arabic{linenumber}}

%% comments
\newcommand{\hidecomments}{\renewcommand{\comment}[3]{}}
\newcommand{\comment}[3]{\textcolor{#1}{\textbf{[#2: }\textit{#3}\textbf{]}}}
\newcommand{\david}[1]{\comment{magenta}{DE}{#1}}
\newcommand{\jd}[1]{\comment{blue}{JD}{#1}}
\newcommand{\ben}[1]{\comment{purple}{BB}{#1}}
\newcommand{\mike}[1]{\comment{orange}{ML}{#1}}
\newcommand{\irena}[1]{\comment{red}{IP}{#1}}

%% code
\newcommand{\code}[1]{{\tt #1}}

%% misc macros
\newcommand{\etal}{\textit{et al}.\xspace}
%% for referencing TeX macros:
\newcommand\ttbackslash{{\tt\char`\\}}
\newcommand{\macro}[1]{{\tt\ttbackslash#1}}
\newcommand{\term}[1]{{\bfseries\slshape#1}}
\newcommand{\thickredline}{{\color{red}\bigskip\begin{center}\linethickness{2mm}\line(1,0){250}\end{center}\bigskip}}

%% abbreviations
\newcommand{\ie}{\emph{i.e., }}
\newcommand{\eg}{\emph{e.g., }}
\newcommand{\etc}{\emph{etc.}\xspace}

%% notation
\newcommand{\emx}[1]{\ensuremath{#1}\xspace}
\newcommand{\R}{\emx{{\mathcal R}}}
\newcommand{\Rzero}{\emx{{\mathcal R}_0}}
\newcommand{\Rt}{\emx{{\mathcal R}_t}}
\newcommand{\littler}{\emx{r}}
\newcommand{\littlerwt}{\emx{r_{WT}}}
\newcommand{\littlervoc}{\emx{r_{VOC}}}
\newcommand{\B}{\emx{\beta}}
\newcommand{\Bwt}{\emx{\beta_{WT}}}
\newcommand{\Bvoc}{\emx{\beta_{VOC}}}
\newcommand{\textsub}[2]{\emx{{{#1}_{\textrm{\tiny #2}}}}}
\newcommand{\pmob}{\textsub{p}{mob}}


%% settings
\date{\today\ @ \thistime}

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother
